<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Dashboard â€“ CRM AssociaÃ§Ã£o</title>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #0f0f0f;
  color: #fff;
}

header {
  padding: 20px;
  text-align: center;
  font-size: 22px;
  font-weight: bold;
  background: linear-gradient(135deg, #2b2b2b, #151515);
}

main {
  padding: 30px;
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 20px;
}

.card {
  background: #151515;
  padding: 20px;
  border-radius: 18px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

input, button {
  padding: 10px;
  border-radius: 10px;
  border: none;
  font-size: 14px;
}

input {
  background: #1e1e1e;
  color: #fff;
}

button {
  background: #2563eb;
  color: #fff;
  cursor: pointer;
}

button.toggle {
  background: #333;
}

.fixados {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-top: 10px;
}

.hidden {
  display: none;
}

.item {
  background: #1f1f1f;
  padding: 10px;
  border-radius: 10px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.item button {
  background: #b91c1c;
  padding: 5px 8px;
}

@media(max-width: 900px) {
  main { grid-template-columns: 1fr; }
}
</style>
</head>

<body>

<header>CRM AssociaÃ§Ã£o</header>

<main>

<!-- LEMBRETES -->
<section class="card">
  <h2>Lembretes</h2>
  <input id="lembreteTexto" placeholder="Digite o lembrete">
  <button onclick="addLembrete()">Adicionar lembrete</button>
  <div class="fixados" id="listaLembretes"></div>
</section>

<!-- CARTÃ•ES -->
<section class="card">
  <h2>CartÃµes</h2>
  <input type="date" id="dataCartao">
  <input type="number" id="qtdCartao" placeholder="Quantidade">
  <button onclick="registrarCartao()">Registrar</button>

  <button class="toggle" onclick="toggleCartoes()">ğŸ“‚ Abrir registros</button>
  <div class="fixados hidden" id="cartoesFixados"></div>
</section>

<!-- QUADRA -->
<section class="card">
  <h2>Aluguel de Quadra</h2>
  <input type="date" id="dataQuadra">
  <input type="time" id="horaQuadra">
  <button onclick="registrarQuadra()">Registrar</button>

  <button class="toggle" onclick="toggleQuadra()">ğŸ“‚ Abrir horÃ¡rios</button>
  <div class="fixados hidden" id="quadraFixados"></div>
</section>

</main>

<script>
/* ================= STORAGE ================= */
function salvar(key, value) {
  localStorage.setItem(key, JSON.stringify(value))
}
function carregar(key) {
  return JSON.parse(localStorage.getItem(key)) || []
}

/* ================= LEMBRETES ================= */
let lembretes = carregar('lembretes')

function addLembrete() {
  if (!lembreteTexto.value) return
  lembretes.push(lembreteTexto.value)
  salvar('lembretes', lembretes)
  lembreteTexto.value = ''
  renderLembretes()
}

function removerLembrete(i) {
  lembretes.splice(i, 1)
  salvar('lembretes', lembretes)
  renderLembretes()
}

function renderLembretes() {
  listaLembretes.innerHTML = ''
  lembretes.forEach((l, i) => {
    listaLembretes.innerHTML += `
      <div class="item">
        ${l}
        <button onclick="removerLembrete(${i})">âŒ</button>
      </div>`
  })
}

/* ================= CARTÃ•ES ================= */
let cartoes = carregar('cartoes')
let cartoesAbertos = false

function registrarCartao() {
  if (!dataCartao.value || !qtdCartao.value) return
  cartoes.push({ data: dataCartao.value, qtd: qtdCartao.value })
  salvar('cartoes', cartoes)
  renderCartoes()
}

function toggleCartoes() {
  cartoesAbertos = !cartoesAbertos
  cartoesFixados.classList.toggle('hidden', !cartoesAbertos)
  event.target.innerText = cartoesAbertos
    ? 'ğŸ“ Fechar registros'
    : 'ğŸ“‚ Abrir registros'
  if (cartoesAbertos) renderCartoes()
}

function renderCartoes() {
  cartoesFixados.innerHTML = ''
  cartoes.forEach(c => {
    cartoesFixados.innerHTML += `
      <div class="item">
        ğŸ“… ${c.data} â€” ${c.qtd} cartÃµes
      </div>`
  })
}

/* ================= QUADRA ================= */
let alugueis = carregar('quadra')
let quadraAberta = false

function registrarQuadra() {
  if (!dataQuadra.value || !horaQuadra.value) return
  alugueis.push({ data: dataQuadra.value, hora: horaQuadra.value })
  limparExpirados()
  salvar('quadra', alugueis)
  renderQuadra()
}

function limparExpirados() {
  const agora = new Date()
  alugueis = alugueis.filter(a =>
    new Date(`${a.data}T${a.hora}`) > agora
  )
  salvar('quadra', alugueis)
}

function toggleQuadra() {
  quadraAberta = !quadraAberta
  quadraFixados.classList.toggle('hidden', !quadraAberta)
  event.target.innerText = quadraAberta
    ? 'ğŸ“ Fechar horÃ¡rios'
    : 'ğŸ“‚ Abrir horÃ¡rios'
  if (quadraAberta) renderQuadra()
}

function renderQuadra() {
  limparExpirados()
  quadraFixados.innerHTML = ''
  alugueis.forEach(a => {
    quadraFixados.innerHTML += `
      <div class="item">
        ğŸŸï¸ ${a.data} â€” ${a.hora}
      </div>`
  })
}

/* ================= INICIALIZA ================= */
renderLembretes()
renderCartoes()
renderQuadra()
setInterval(renderQuadra, 60000)
</script>

</body>
</html>
