<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>CRM Associa√ß√£o</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
<style>
*{box-sizing:border-box}
body{margin:0;font-family:'Poppins',sans-serif;background:#f4f7f6;padding-top:80px}
header{position:fixed;top:0;left:0;right:0;background:#1e6b4f;color:#fff;padding:20px;font-size:20px;font-weight:600;z-index:1000}
.container{padding:20px;display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:20px}
.card{background:#fff;border-radius:16px;padding:20px;box-shadow:0 10px 25px rgba(0,0,0,.1)}
.card h2{margin-top:0;color:#1e6b4f}
input,textarea{width:100%;padding:10px;border-radius:10px;border:1px solid #ccc;font-family:'Poppins'}
button{margin-top:10px;padding:10px;border:none;border-radius:10px;background:#1e6b4f;color:#fff;cursor:pointer}
button.danger{background:#c0392b}

/* FIXOS */
.fixed-notes{position:fixed;top:110px;right:20px;width:260px;z-index:900}
.fixed-cards{position:fixed;top:110px;left:20px;width:260px;z-index:900}
.note{background:#fff;padding:10px;border-radius:10px;margin-bottom:10px;box-shadow:0 5px 15px rgba(0,0,0,.15)}
.note button{margin-top:5px;background:#c0392b}

.logout{position:fixed;bottom:20px;right:20px;background:#c0392b}

@media(max-width:900px){
  .fixed-notes,.fixed-cards{position:static;width:100%}
}
</style>
</head>
<body>
<header>CRM Associa√ß√£o</header>

<div class="fixed-cards card">
<h2>üí≥ Cart√µes (Resumo)</h2>
<div id="resumoCartoes"></div>
</div>

<div class="fixed-notes card">
<h2>üìå Lembretes</h2>
<div id="listaLembretes"></div>
</div>

<div class="container">

<div class="card">
<h2>‚ûï Novo Lembrete</h2>
<textarea id="textoLembrete" rows="4" placeholder="Digite o lembrete"></textarea>
<button onclick="addLembrete()">Adicionar lembrete</button>
</div>

<div class="card">
<h2>üèüÔ∏è Aluguel de Quadra</h2>
<input id="nomeQuadra" placeholder="Respons√°vel">
<input type="date" id="dataQuadra">
<input type="time" id="horaQuadra">
<button onclick="addQuadra()">Registrar aluguel</button>
<ul id="listaQuadra"></ul>
</div>

<div class="card">
<h2>üí≥ Registrar Cart√µes</h2>
<input type="date" id="dataCartao">
<input type="number" id="qtdCartao" placeholder="Quantidade">
<button onclick="addCartao()">Salvar registro</button>
</div>

</div>

<button class="logout" onclick="logout()">Sair</button>

<script>
if(localStorage.getItem('logado')!=='true') location.href='index.html';

/* ===== LEMBRETES ===== */
let lembretes = JSON.parse(localStorage.getItem('lembretes') || '[]');

function renderLembretes(){
  const lista = document.getElementById('listaLembretes');
  lista.innerHTML='';
  lembretes.forEach((texto,index)=>{
    const div=document.createElement('div');
    div.className='note';
    div.innerHTML=`${texto}<button class="danger" onclick="delLembrete(${index})">Excluir</button>`;
    lista.appendChild(div);
  });
  localStorage.setItem('lembretes',JSON.stringify(lembretes));
}

function addLembrete(){
  const txt=document.getElementById('textoLembrete');
  if(!txt.value.trim()) return;
  lembretes.push(txt.value);
  txt.value='';
  renderLembretes();
}

function delLembrete(i){lembretes.splice(i,1);renderLembretes();}
renderLembretes();

/* ===== QUADRA ===== */
let quadras = JSON.parse(localStorage.getItem('quadras') || '[]');

function addQuadra(){
  if(!nomeQuadra.value||!dataQuadra.value||!horaQuadra.value) return;
  quadras.push({n:nomeQuadra.value,d:dataQuadra.value,h:horaQuadra.value});
  nomeQuadra.value='';dataQuadra.value='';horaQuadra.value='';
  renderQuadras();
}

function renderQuadras(){
  const hoje = new Date().toISOString().split('T')[0];
  quadras = quadras.filter(q=>q.d>=hoje);
  listaQuadra.innerHTML='';
  quadras.forEach(q=>{
    const li=document.createElement('li');
    li.textContent=`${q.n} - ${q.d} ${q.h}`;
    listaQuadra.appendChild(li);
  });
  localStorage.setItem('quadras',JSON.stringify(quadras));
}
renderQuadras();

/* ===== CART√ïES ===== */
let cartoes = JSON.parse(localStorage.getItem('cartoes') || '[]');

function addCartao(){
  if(!dataCartao.value||!qtdCartao.value) return;
  cartoes.push({d:dataCartao.value,q:qtdCartao.value});
  dataCartao.value='';qtdCartao.value='';
  renderCartoes();
}

function renderCartoes(){
  resumoCartoes.innerHTML='';
  cartoes.forEach(c=>{
    const div=document.createElement('div');
    div.textContent=`${c.d} : ${c.q}`;
    resumoCartoes.appendChild(div);
  });
  localStorage.setItem('cartoes',JSON.stringify(cartoes));
}
renderCartoes();

function logout(){localStorage.clear();location.href='index.html'}
</script>
</body>
</html>
